---
title: "Stat 5309 Semester Project"
author: "Tom Wilson"
date: "May 10th, 2019"
output: pdf_document
---

```{r setup, include=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(knitr)
library(agricolae)
library(rsm)
```


# 1
An article in the AT&T Technical Journal (March/April 1986, Vol. 65, pp. 39-50) describes the application of two-level factorial designs to integrated circuit manufacturing. A basic processing step is to grow an epitaxial layer on polished silicon wafers. The wafers mounted on a susceptor are positioned inside a bell jar, and chemical vapors are introduced. The susceptor is rotated and heat is applied until the epitaxial layer is thick enough. An experiment was run using two factors: arsenic flow rate (A) and deposition time (B). Four replicates were run, and the epitaxial layer thickness was measured in  um. The data are shown below:

Replicate Factor Levels
```{r}
flow_rates <- c('0.55','0.59')
depo_times <- c('10','15')
epitaxial_data <- expand.grid(flow_rate=flow_rates,
                              depo_time=rep(depo_times,4))
epitaxial_data <- cbind(epitaxial_data,
                        thickness=c(14.037,13.880,14.821,14.888, 
                                    16.165,13.860,14.757,14.921,
                                    13.972,14.032,14.843,14.415, 
                                    13.907,13.914,14.878,14.932))
epitaxial_data %>% kable()
```


## a
Estimate the factor effects.

## b
Conduct an analysis of variance. Which factors are important?

## c
Write down a regression equation that could be used to predict epitaxial layer thickness over the region of arsenic flow rate and deposition time used in this experiment.

Build a RSM  model (2nd order, 1st order with interaction). Choose one which works. (c2) Perform Daniel plot and Lenth plot.  What is the model ‘s R-square. 

## d
Analyze the residuals. Are there any residuals that should cause concern?

Find the cook distance. Take out the outlier(s). Rebuilt the rsm model on new data.

## e
Discuss how you might deal with the potential outlier found in part (d).

## f
Perform a canonical analysis. Do a contour plot. Any optimal response?


# 2
A nickel-titanium alloy is used to make components for jet turbine aircraft engines. Cracking is a potentially serious problem in the final part, because it can lead to nonrecoverable failure. A test is run at the parts producer to determine the effect of four factors on cracks. The four factors are pouring temperature (A), titanium content (B), heat treatment method (C), and amount of grain refiner used (D). Two replicates of a  2^4  design are run, and the length of crack in mm  $\times 10^{-2}$  ? induced in a sample coupon subjected to a standard test is measured. The data are shown in the following table:

```{r}
low_high <- c('-','+')
cracking_data <- expand.grid(pouring_temperature=low_high,
                             titanium_content=low_high,
                             heat_treatment_method=low_high,
                             grain_refiners=rep(low_high,2))
cracking_data <- cbind(cracking_data,
                       crack_length=c(7.037,14.707,11.635,17.273,
                                      10.403,4.368,9.360,14.440,
                                      8.561,16.867,13.876,19.824,
                                      11.846,6.125,11.190,15.653,
                                      6.376,15.219,12.089,17.815,
                                      10.151,4.098,9.253,12.923,
                                      8.951,17.052,13.658,19.639,
                                      12.337,5.904,10.935,15.053))
cracking_data %>% kable()
```




## a
Estimate the factor effects, Which factor effects appear to be large?
Change the factors name (“Temp”, “Content”, “Method”, “Refiner”, “Length”). 

## b
Conduct an analysis of variance. Do any of the factors affect cracking? Use  $\alpha = 0.05$ .
Perform effects Daniel plot and Lenth plot.


## c
Write down a regression model that can be used to predict crack length as a function of the significant main effects and interactions you have identified in part (b). Build a  RSM model (2nd order, 1st order with interaction). Choose one which works. 


## d
Analyze the residuals from this experiment. Take out outliers, if any.

## e
Is there an indication that any of the factors affect the variability in cracking?


## f
What recommendations would you make regarding process operations? Use interaction and/or main effect plots to assist in drawing conclusions.
Perform a canonical analysis on the model. Is there an optimal response?
Perform contour plot of Temp and Content.

# 3
Consider the three-variable central composite design shown below. Analyze the data and draw conclusions, assuming that we wish to maximize conversion (y,) with activity (y:) between 55 and 60.

```{r}
```

```{r}
conversion_data <- ccd(3, n0 = c(4,2), alpha = "rotatable", randomize = FALSE)
colnames(conversion_data) <- c('run','std.roder','time','temp','catalyst','Block')
conversion_data <- cbind(conversion_data, 
                         conversion = c(74.00,
                                        51.00,
                                        88.00,
                                        70.00,
                                        71.00,
                                        90.00,
                                        66.00,
                                        97.00,
                                        81.00,
                                        75.00,
                                        76.00,
                                        83.00,
                                        76.00,
                                        79.00,
                                        85.00,
                                        97.00,
                                        35.00,
                                        81.00,
                                        80.00,
                                        91.00),
                         activity = c(53.20,
                                      62.90,
                                      53.40,
                                      62.60,
                                      57.30,
                                      67.90,
                                      59.80,
                                      67.80,
                                      59.20,
                                      60.40,
                                      59.10,
                                      60.60,
                                      59.10,
                                      65.90,
                                      60.00,
                                      60.70,
                                      57.40,
                                      63.20,
                                      60.80,
                                      38.90))
conversion_data %>% kable()
```


## a
Estimate the factor effects. Which factors appear to be large?

## b
Perform an analysis of variance. Do any factor affects . Use 

## c
Build a RSM models (choose a model which works). Daniel plot/Lenth plot.

## d
Perform a residual analysis. Take out any outlyers.

## e
Perform a canonical analysis. Any optimal response. Do a contour plot of Time-Temperature, Time-Catalyst, Temp-Catalyst.

# 4
The following data were collected by a chemical engineer. The response y is filtration time,  x_1 ; is temperature, and  x_3 ; is pressure. Fit a second-order model.

```{r}
fitration_data <- data.frame(x1=c(-1,-1,1,1,-1.414,1.414,0,0,0,0,0,0,0),
                             x2=c(-1,1,-1,1,0,0,-1.414,1.414,0,0,0,0,0),
                             y =c(54,45,32,47,50,53,47,51,41,39,44,42,40))
fitration_data %>% kable()
```

## a
What operating conditions would you recommend if the objective is to minimize the filtration time?

## b
What operating conditions would you recommend if the objective is to operate the process at a mean filtration rate very close to 46?

